# これから実装すること

Phase 1（スプラッシュ・ホーム・ログイン・新規登録）は完了済み。以下はモックアップに沿って今後実装する項目の一覧です。

---

## 現状（完了済み）

| 項目 | ルート | 状態 |
|------|--------|------|
| スプラッシュ | `/` | 完了（金グラデ ＋ Share Wallet → 2.5秒で /home） |
| ホーム | `/home` | 完了（Logo ＋ ログイン・新規登録ボタン ＋ 金貨） |
| ログイン | `/login` | 完了（Logo ＋ 入力2つ ＋ ログインボタン ＋ 新規登録リンク ＋ 金貨） |
| 新規登録 | `/register` | 完了（Logo ＋ 入力3つ ＋ 新規登録ボタン ＋ ログインリンク ＋ 金貨） |
| 共通UI | — | CoinIcon, Logo, PrimaryButton, TextInput, ScreenContainer 済み |

---

## 1. 共有金額入力画面（モックアップ 5・6枚目）

### 目的
支出のジャンルと金額を入力し、「登録」で記録する画面。

### 想定ルート
- `/expense` または `/shared/input`

### 画面構成（上から）
- Share Wallet ロゴ（Header または Logo）
- **円グラフ**（カテゴリ別の割合・アイコン付き）
- 入力1: **ジャンル**（選択式: 交通費・食費など）
- 入力2: **使った金額**（数値・円表示）
- **「登録」ボタン**（PrimaryButton）
- フッター: **CoinIcon**

### 実装で必要なもの
- **円グラフ（パイチャート）コンポーネント**  
  - カテゴリ・割合・アイコン・ラベル（SAVINGS, HOUSING, TRANSPORTATION 等）を表示
- **ジャンル選択 UI**  
  - ドロップダウン or モーダルピッカー（TextInput 拡張 or 専用 Select コンポーネント）
- 金額入力  
  - 数値のみ・円表示・バリデーション（TextInput の type やフォーマット）
- 登録処理  
  - 仮実装（console.log）→ 後で API 連携

### 優先度
高（モックアップの中核画面の一つ）

---

## 2. 個人家計簿画面（モックアップ 7枚目）

### 目的
個人の支出を円グラフと「詳細」一覧で確認する画面。

### 想定ルート
- `/ledger` または `/personal`

### 画面構成（上から）
- Share Wallet ロゴ
- **円グラフ**（共有金額入力と同じ形式）
- **「詳細」エリア**（取引リスト・カード表示など）
- フッター: **CoinIcon**

### 実装で必要なもの
- 円グラフコンポーネント（共有金額入力と共通化）
- **詳細エリア用コンポーネント**  
  - リスト / カード / テーブル（まずプレースホルダーでも可）
- データ取得  
  - 仮データ or API 連携

### 優先度
中（共有金額入力の次）

---

## 3. 共有家計簿画面（モックアップ 8枚目）

### 目的
共有の支出を円グラフと「詳細(履歴)」で確認する画面。

### 想定ルート
- `/shared` または `/shared/ledger`

### 画面構成（上から）
- Share Wallet ロゴ
- **円グラフ**
- **「詳細(履歴)」エリア**（共有取引履歴）
- フッター: **CoinIcon**

### 実装で必要なもの
- 円グラフコンポーネント（上記と共通）
- 詳細(履歴)用リストコンポーネント
- 共有履歴のデータ取得（API 想定）

### 優先度
中

---

## 4. ログイン・新規登録の API 連携

### 目的
実際の認証 API を呼び、ログイン・新規登録を完了させる。

### やること
- **ログイン**（`/login`）  
  - メール・パスワードを API に送信  
  - 成功時: トークン保存・遷移先（例: 共有金額入力 or 家計簿）へリダイレクト  
  - 失敗時: エラーメッセージ表示
- **新規登録**（`/register`）  
  - 名前・メール・パスワードを API に送信  
  - 成功時: ログイン画面へ or 自動ログインして遷移  
  - 失敗時: エラーメッセージ表示

### 実装で必要なもの
- API クライアント（fetch または axios 等）
- トークン保存（Cookie / localStorage / 認証ライブラリ）
- エラー表示用 UI（インライン or トースト）

### 優先度
高（バックエンド仕様が決まっていれば）

---

## 5. 認証状態・ナビゲーション

### 目的
ログイン済みかどうかで表示を切り替え、未ログイン時はログインへ誘導する。

### やること
- **認証状態の保持**  
  - トークン or セッションの有無で「ログイン済み」を判定
- **未ログイン時のリダイレクト**  
  - 例: 家計簿・共有金額入力などはログイン必須 → 未ログインなら `/login` へ
- **ログイン後の遷移先**  
  - 例: 共有金額入力（`/expense`）or 個人家計簿（`/ledger`）へ
- **ホームからの導線**  
  - ログイン済みなら「金額入力」「家計簿」へのリンク or ボタンを表示するか検討

### 実装で必要なもの
- 認証コンテキスト or グローバル状態
- 保護ルート用ラッパー or ミドルウェア（Next.js なら middleware も検討）

### 優先度
中（API 連携と並行 or その直後）

---

## 6. その他（任意）

- **スプラッシュのタップでスキップ**  
  - 2.5秒待たずにホームへ遷移できるようにする
- **「ホームへ」リンク**  
  - ログイン・新規登録画面からホーム（`/home`）に戻るリンク
- **フォームバリデーション**  
  - メール形式・パスワード長・必須項目のチェック
- **アクセシビリティ**  
  - フォーカス順・aria 属性・エラー時の案内

---

## 実装順序の目安

| 順番 | 内容 | 主な成果物 |
|------|------|------------|
| 1 | 円グラフコンポーネント | `PieChart.tsx` 等 |
| 2 | 共有金額入力画面 | `/expense`、ジャンル選択・金額入力・登録ボタン |
| 3 | 個人家計簿画面 | `/ledger`、詳細エリア |
| 4 | 共有家計簿画面 | `/shared`、詳細(履歴) |
| 5 | ログイン・新規登録 API 連携 | 認証 API 呼び出し・トークン・遷移 |
| 6 | 認証状態・リダイレクト | 保護ルート・未ログイン時のリダイレクト |

---

## 補足

- 円グラフは **Recharts** や **Chart.js** などのライブラリを使うと実装が早い。
- ジャンル（カテゴリ）の一覧はバックエンド API で返す想定なら、まずは固定リストで UI だけ実装してもよい。
- 認証は **NextAuth.js** や **Clerk** などを導入すると、セッション・保護ルートが楽になる。

このドキュメントを更新しながら、上記の順で進めると整理しやすいです。
